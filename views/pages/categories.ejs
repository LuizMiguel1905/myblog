<%- contentFor('body') %>
<main class="container">
    <h1>Categorias</h1>
    <a class="btn btn-primary" href="/admpainel/categories/new" role="button">Novo</a>
    <table class="table table-hover">
        <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">Nome</th>
                <th scope="col">Descrição</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            <% categories.forEach((categories) =>{%>
            <tr>
                <th scope="row"><%= categories.id %></th>
                <td scope="col"><%= categories.name %></td>
                <td scope="col"><%= categories.description %></td>
                <td>
                    <a href="/admpainel/categories/edit/<%= categories.id %>" class="btn btn-primary">Editar</a>
                    <button type="button" onclick="removeCategory(<%= categories.id %>)" class="btn btn-danger">Remover</button>
                </td>
            </tr>
            <% })%>
        </tbody>
    </table>
</main>
<script>
    function removeCategory(id){
        if(confirm("Voce realmente deseja remover a categoria  selecionado ?"))
        fetch(`/admpainel/categories/remove/${id}`,{method: "POST",})
        .then(
            function(response){
                document.location.reload()
            }
        )
    }
</script>